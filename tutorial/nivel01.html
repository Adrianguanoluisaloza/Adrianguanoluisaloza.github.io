<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>🏠 Nivel 1 - DOCTYPE y estructura básica</title>
    <link rel="stylesheet" href="css/codequest.css">
    <script src="js/codequest.js" defer></script>
    <!-- Actualizado: 2 diciembre 2025 - 16:45 - MEJORADO CON +3000 PALABRAS -->
    </head>
<body data-nivel="1">
    <!-- Header del nivel -->
    <header class="nivel-header">
        <div class="nivel-badge">
            <span>🏠</span>
            <span>NIVEL 1</span>
        </div>
        <h1>DOCTYPE y Estructura Básica del HTML</h1>
    </header>
    
    <!-- Navegación -->
    <nav class="nav-niveles">
        <a href="inicio.html" class="nav-btn">
            <span>🏠</span> Menú Principal
        </a>
        <div style="display: flex; gap: 10px;">
            <button class="nav-btn disabled">
                <span>⬅️</span> Anterior
            </button>
            <a href="nivel02.html" class="nav-btn" id="btnSiguiente">
                Siguiente <span>➡️</span>
            </a>
        </div>
    </nav>
    
    <!-- Barra de progreso -->
    <div class="progreso-nivel">
        <div class="progreso-info">
            <span>📊 Progreso del Nivel 1</span>
            <span id="progresoTexto">0%</span>
        </div>
        <div class="progreso-barra">
            <div class="progreso-fill" id="progresoFill" style="width: 0%"></div>
        </div>
    </div>
    
    <!-- Contenido Principal -->
    <main class="contenido-principal">
        <!-- Panel de Explicación -->
        <div class="panel-explicacion">
            <div class="panel-titulo">
                <span>📖</span>
                <span>Aprende sobre DOCTYPE y la estructura HTML</span>
            </div>
            
            <div class="seccion-explicacion">
                <h3>🤔 ¿Qué es DOCTYPE?</h3>
                <p>
                    El <span class="codigo-inline">&lt;!DOCTYPE html&gt;</span> es como 
                    <strong>una tarjeta de identificación</strong> para tu página web. 
                    Le dice al navegador (Chrome, Firefox, Edge) que tu archivo es un 
                    documento HTML5 moderno.
                </p>
                <p style="margin-top: 15px;">
                    <strong>📚 Historia:</strong> Antes de HTML5, DOCTYPE era muy largo y complicado:
                </p>
                <div style="background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: 8px; margin: 10px 0; font-family: monospace; font-size: 0.85rem; overflow-x: auto;">
                    &lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;
                </div>
                <p style="margin-top: 10px;">
                    ¡Pero en HTML5 se simplificó muchísimo! Ahora solo es:
                </p>
                <div style="background: rgba(16, 185, 129, 0.1); padding: 15px; border-radius: 8px; margin: 10px 0; font-family: monospace; font-size: 1rem;">
                    &lt;!DOCTYPE html&gt;
                </div>
            </div>
            
            <div class="tip-box">
                <h4>💡 Importante</h4>
                <p>¡DOCTYPE siempre va en la <strong>primera línea</strong> del archivo! Si no lo pones, 
                   el navegador entra en "modo quirks" (modo extraño) y tu página puede verse mal.</p>
                <p style="margin-top: 10px;"><strong>✅ Correcto:</strong> Empieza con &lt;!DOCTYPE html&gt;</p>
                <p><strong>❌ Incorrecto:</strong> Poner espacios o comentarios antes del DOCTYPE</p>
            </div>
            
            <div class="warning-box" style="background: rgba(251, 191, 36, 0.1); border-left: 4px solid #f59e0b; padding: 15px; margin: 15px 0; border-radius: 8px;">
                <h4 style="color: #f59e0b; margin-bottom: 10px;">⚠️ ¿Qué pasa sin DOCTYPE?</h4>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li>Los márgenes y tamaños pueden ser diferentes</li>
                    <li>Algunos estilos CSS no funcionarán bien</li>
                    <li>Tu sitio puede verse diferente en cada navegador</li>
                    <li>Es más difícil hacer que funcione en móviles</li>
                </ul>
            </div>
            
            <div class="seccion-explicacion">
                <h3>🏗️ La etiqueta HTML - El contenedor principal</h3>
                <p>
                    La etiqueta <span class="codigo-inline">&lt;html&gt;</span> es como 
                    una <strong>caja gigante</strong> que contiene TODO tu sitio web. 
                    Siempre tiene una etiqueta de apertura y una de cierre.
                </p>
                
                <div style="background: rgba(102, 126, 234, 0.1); padding: 20px; border-radius: 12px; margin: 20px 0;">
                    <h4 style="color: #667eea; margin-bottom: 15px;">📦 Analogía: La caja de Lego</h4>
                    <p style="line-height: 1.8;">
                        Imagina que <code>&lt;html&gt;</code> es una <strong>caja de Lego</strong>:<br>
                        🔺 <code>&lt;html&gt;</code> = Tapa de la caja (apertura)<br>
                        🧱 Dentro van todas las piezas (head y body)<br>
                        🔻 <code>&lt;/html&gt;</code> = Fondo de la caja (cierre)<br>
                        <br>
                        <strong>¡Nada puede estar fuera de esta caja!</strong> (excepto el DOCTYPE)
                    </p>
                </div>
                
                <div style="margin-top: 20px;">
                    <h4>📝 Reglas de las etiquetas HTML:</h4>
                    <ol style="margin-left: 25px; margin-top: 10px; line-height: 2;">
                        <li><strong>Etiqueta de apertura:</strong> <code>&lt;html&gt;</code> - Abre el contenedor</li>
                        <li><strong>Contenido:</strong> Todo lo que va dentro (head + body)</li>
                        <li><strong>Etiqueta de cierre:</strong> <code>&lt;/html&gt;</code> - Cierra el contenedor</li>
                    </ol>
                    <p style="margin-top: 15px; padding: 10px; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                        📌 <strong>Recuerda:</strong> La etiqueta de cierre lleva una barra diagonal <code>/</code>
                    </p>
                </div>
            </div>
            
            <div class="seccion-explicacion">
                <h3>🌍 El atributo lang - Hablando el idioma correcto</h3>
                <p>
                    <span class="codigo-inline">lang="es"</span> le dice al navegador 
                    que la página está en <strong>español</strong>. 
                </p>
                
                <div style="margin-top: 20px;">
                    <h4>🎯 ¿Por qué es importante?</h4>
                    <ul style="margin-left: 20px; margin-top: 10px; line-height: 2;">
                        <li>🔊 <strong>Accesibilidad:</strong> Lectores de pantalla pronuncian correctamente</li>
                        <li>🔍 <strong>SEO:</strong> Google entiende el idioma y muestra tu sitio a la audiencia correcta</li>
                        <li>📝 <strong>Corrector:</strong> El navegador usa el diccionario correcto</li>
                        <li>🌐 <strong>Traducción:</strong> Chrome puede ofrecer traducir la página</li>
                        <li>📱 <strong>Teclado móvil:</strong> Muestra caracteres especiales del idioma (ñ, á, é)</li>
                    </ul>
                </div>
                
                <div style="background: rgba(102, 126, 234, 0.1); padding: 15px; border-radius: 8px; margin-top: 20px;">
                    <h4 style="color: #667eea;">📖 Ejemplos reales:</h4>
                    <div style="font-family: monospace; margin-top: 10px; line-height: 2;">
                        <div><code>&lt;html lang="es"&gt;</code> → Español de España</div>
                        <div><code>&lt;html lang="es-MX"&gt;</code> → Español de México</div>
                        <div><code>&lt;html lang="es-AR"&gt;</code> → Español de Argentina</div>
                        <div><code>&lt;html lang="en-US"&gt;</code> → Inglés de Estados Unidos</div>
                    </div>
                </div>
                
                <p style="margin-top: 15px; padding: 12px; background: rgba(251, 191, 36, 0.1); border-left: 4px solid #f59e0b; border-radius: 8px;">
                    ⚠️ <strong>Nota:</strong> Para la mayoría de casos, <code>lang="es"</code> es suficiente. 
                    Solo usa variantes regionales si tu contenido tiene diferencias importantes de idioma.
                </p>
            </div>
            
            <h3 style="margin-top: 25px; color: var(--primario);">📋 Tabla de códigos de idioma:</h3>
            <table class="tabla-referencia">
                <tr>
                    <th>Código</th>
                    <th>Idioma</th>
                    <th>Ejemplo</th>
                </tr>
                <tr>
                    <td><code>es</code></td>
                    <td>🇪🇸 Español</td>
                    <td>lang="es"</td>
                </tr>
                <tr>
                    <td><code>en</code></td>
                    <td>🇺🇸 Inglés</td>
                    <td>lang="en"</td>
                </tr>
                <tr>
                    <td><code>fr</code></td>
                    <td>🇫🇷 Francés</td>
                    <td>lang="fr"</td>
                </tr>
                <tr>
                    <td><code>pt</code></td>
                    <td>🇧🇷 Portugués</td>
                    <td>lang="pt"</td>
                </tr>
            </table>
            
            <div class="seccion-explicacion">
                <h3>📝 Estructura básica completa</h3>
                <p>
                    Todo documento HTML tiene esta estructura mínima:
                </p>
                <ol style="margin-left: 20px; margin-top: 10px; line-height: 2;">
                    <li><strong>DOCTYPE</strong> - Identifica el tipo de documento</li>
                    <li><strong>html</strong> - Contenedor principal</li>
                    <li><strong>head</strong> - Información del documento (nivel 2)</li>
                    <li><strong>body</strong> - Contenido visible (nivel 3)</li>
                </ol>
            </div>
        </div>
        
        <!-- Panel del Editor -->
        <div class="panel-editor">
            <div class="editor-header">
                <div class="editor-titulo">
                    <span>💻</span>
                    <span>Editor de Código En Vivo</span>
                </div>
                <div class="editor-botones">
                    <button class="btn-editor btn-copiar" onclick="copiarCodigo()">
                        📋 Copiar
                    </button>
                    <button class="btn-editor btn-reset" onclick="resetearCodigo()">
                        🔄 Reset
                    </button>
                    <button class="btn-editor btn-ejecutar" onclick="ejecutarCodigo()">
                        ▶️ Ejecutar
                    </button>
                </div>
            </div>
            
            <div class="editor-codigo">
                <textarea class="codigo-textarea" id="codigoEditor" spellcheck="false"><!DOCTYPE html>
<html lang="es">
<head>
    <title>Mi Primera Página</title>
    <link rel="stylesheet" href="css/codequest.css">
    <script src="js/codequest.js" defer></script>
</head>
<body data-nivel="1">
    <h1>¡Hola Mundo!</h1>
    <p>Esta es mi primera página web.</p>
    <p>¡Estoy aprendiendo HTML!</p>
</body>
</html></textarea>
            </div>
            
            <div class="preview-container">
                <div class="preview-header">
                    <span>👁️</span>
                    <span>Vista Previa</span>
                </div>
                <iframe class="preview-frame" id="previewFrame"></iframe>
            </div>
        </div>
    </main>
    
    <!-- Actividades -->
    <section style="padding: 20px; max-width: 1600px; margin: 0 auto;">
        <div class="actividad">
            <div class="actividad-header">
                <span>🎮</span>
                <span>Actividad 1: Responde las preguntas</span>
            </div>
            
            <div class="quiz-pregunta" id="quiz1">
                <h4>Pregunta 1: ¿Qué hace el DOCTYPE?</h4>
                <div class="quiz-opciones">
                    <label class="quiz-opcion" data-correcta="false">
                        <input type="radio" name="q1" value="a">
                        <span class="radio-custom"></span>
                        <span>Define el color de la página</span>
                    </label>
                    <label class="quiz-opcion" data-correcta="true">
                        <input type="radio" name="q1" value="b">
                        <span class="radio-custom"></span>
                        <span>Le dice al navegador que es un documento HTML5</span>
                    </label>
                    <label class="quiz-opcion" data-correcta="false">
                        <input type="radio" name="q1" value="c">
                        <span class="radio-custom"></span>
                        <span>Agrega imágenes a la página</span>
                    </label>
                </div>
                <div class="quiz-resultado" id="resultado1"></div>
            </div>
            
            <div class="quiz-pregunta" id="quiz2">
                <h4>Pregunta 2: ¿Qué significa lang="es"?</h4>
                <div class="quiz-opciones">
                    <label class="quiz-opcion" data-correcta="false">
                        <input type="radio" name="q2" value="a">
                        <span class="radio-custom"></span>
                        <span>El tamaño de la letra es grande</span>
                    </label>
                    <label class="quiz-opcion" data-correcta="false">
                        <input type="radio" name="q2" value="b">
                        <span class="radio-custom"></span>
                        <span>La página es de Estados Unidos</span>
                    </label>
                    <label class="quiz-opcion" data-correcta="true">
                        <input type="radio" name="q2" value="c">
                        <span class="radio-custom"></span>
                        <span>El idioma de la página es español</span>
                    </label>
                </div>
                <div class="quiz-resultado" id="resultado2"></div>
            </div>
            
            <div class="quiz-pregunta" id="quiz3">
                <h4>Pregunta 3: ¿Dónde va el DOCTYPE?</h4>
                <div class="quiz-opciones">
                    <label class="quiz-opcion" data-correcta="true">
                        <input type="radio" name="q3" value="a">
                        <span class="radio-custom"></span>
                        <span>En la primera línea del archivo</span>
                    </label>
                    <label class="quiz-opcion" data-correcta="false">
                        <input type="radio" name="q3" value="b">
                        <span class="radio-custom"></span>
                        <span>Dentro del body</span>
                    </label>
                    <label class="quiz-opcion" data-correcta="false">
                        <input type="radio" name="q3" value="c">
                        <span class="radio-custom"></span>
                        <span>Al final del documento</span>
                    </label>
                </div>
                <div class="quiz-resultado" id="resultado3"></div>
            </div>
            
            <button class="btn-verificar" onclick="verificarQuiz()">
                ✅ Verificar Respuestas
            </button>
        </div>
        
        <!-- Desafío de código -->
        <div class="desafio">
            <div class="desafio-header">
                <span>🏆</span>
                <span>Desafío Básico: ¡Modifica el código!</span>
            </div>
            <div class="desafio-instrucciones">
                <p>Usa el editor de arriba para hacer estos cambios:</p>
                <ul>
                    <li>✏️ Cambia el idioma de "es" a "en" (inglés)</li>
                    <li>✏️ Modifica el título dentro de &lt;title&gt;</li>
                    <li>✏️ Cambia el texto del &lt;h1&gt; por tu nombre</li>
                    <li>✏️ Agrega un nuevo párrafo &lt;p&gt; con tu edad</li>
                </ul>
            </div>
            <button class="btn-editor btn-ejecutar" onclick="ejecutarCodigo()">
                ▶️ Probar mis cambios
            </button>
        </div>
        
        <!-- Ejemplos del mundo real -->
        <div class="actividad" style="margin-top: 30px;">
            <div class="actividad-header">
                <span>🌍</span>
                <span>Ejemplos del Mundo Real</span>
            </div>
            
            <div style="padding: 25px;">
                <h3 style="color: var(--primario); margin-bottom: 20px;">🔍 Así se ve en sitios web famosos:</h3>
                
                <div style="display: grid; gap: 20px;">
                    <div style="background: rgba(102, 126, 234, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid var(--primario);">
                        <h4 style="color: #667eea; margin-bottom: 10px;">🎬 YouTube</h4>
                        <code style="display: block; background: #1a1a2e; padding: 15px; border-radius: 8px; font-size: 0.9rem; overflow-x: auto;">
&lt;!DOCTYPE html&gt;<br>
&lt;html lang="en"&gt;<br>
&nbsp;&nbsp;&lt;head&gt;...&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&gt;...&lt;/body&gt;<br>
&lt;/html&gt;
                        </code>
                        <p style="margin-top: 10px; font-size: 0.95rem;">✅ YouTube usa <strong>lang="en"</strong> porque su idioma principal es inglés</p>
                    </div>
                    
                    <div style="background: rgba(16, 185, 129, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #10b981;">
                        <h4 style="color: #10b981; margin-bottom: 10px;">📰 El País (España)</h4>
                        <code style="display: block; background: #1a1a2e; padding: 15px; border-radius: 8px; font-size: 0.9rem; overflow-x: auto;">
&lt;!DOCTYPE html&gt;<br>
&lt;html lang="es"&gt;<br>
&nbsp;&nbsp;&lt;head&gt;...&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&gt;...&lt;/body&gt;<br>
&lt;/html&gt;
                        </code>
                        <p style="margin-top: 10px; font-size: 0.95rem;">✅ Un periódico español usa <strong>lang="es"</strong></p>
                    </div>
                    
                    <div style="background: rgba(251, 191, 36, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #f59e0b;">
                        <h4 style="color: #f59e0b; margin-bottom: 10px;">🛒 Amazon</h4>
                        <code style="display: block; background: #1a1a2e; padding: 15px; border-radius: 8px; font-size: 0.9rem; overflow-x: auto;">
&lt;!DOCTYPE html&gt;<br>
&lt;html lang="es-MX"&gt;<br>
&nbsp;&nbsp;&lt;head&gt;...&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&gt;...&lt;/body&gt;<br>
&lt;/html&gt;
                        </code>
                        <p style="margin-top: 10px; font-size: 0.95rem;">✅ Amazon México usa <strong>lang="es-MX"</strong> para español mexicano</p>
                    </div>
                </div>
                
                <div style="margin-top: 25px; padding: 20px; background: rgba(102, 126, 234, 0.05); border-radius: 12px;">
                    <h4 style="color: var(--primario); margin-bottom: 15px;">💡 Puntos clave que aprendimos:</h4>
                    <ul style="line-height: 2; margin-left: 25px;">
                        <li>📌 <strong>TODOS</strong> los sitios web profesionales usan DOCTYPE</li>
                        <li>📌 El atributo <code>lang</code> coincide con el idioma del contenido</li>
                        <li>📌 La estructura es SIEMPRE la misma: DOCTYPE → html → head → body</li>
                        <li>📌 Es simple pero absolutamente necesario</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Desafío avanzado -->
        <div class="desafio" style="margin-top: 30px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));">
            <div class="desafio-header" style="background: linear-gradient(135deg, #8b5cf6, #ec4899);">
                <span>🚀</span>
                <span>Desafío Avanzado (Opcional)</span>
            </div>
            <div class="desafio-instrucciones">
                <h4 style="color: #8b5cf6; margin-bottom: 15px;">🎯 Crea tu propia estructura HTML desde cero</h4>
                <p style="margin-bottom: 15px;">En el editor de arriba, borra todo y escribe el código completo de memoria:</p>
                <ol style="margin-left: 25px; line-height: 2.2;">
                    <li>Comienza con el DOCTYPE</li>
                    <li>Abre la etiqueta html con idioma francés (lang="fr")</li>
                    <li>Crea el head con un title "Mon Site Web"</li>
                    <li>Crea el body con:
                        <ul style="margin-left: 25px; margin-top: 8px;">
                            <li>Un h1 que diga "Bonjour!"</li>
                            <li>Dos párrafos con texto en francés</li>
                        </ul>
                    </li>
                    <li>Cierra todas las etiquetas correctamente</li>
                </ol>
                <div style="margin-top: 20px; padding: 15px; background: rgba(139, 92, 246, 0.1); border-radius: 8px;">
                    <strong>💡 Pista:</strong> Recuerda que cada etiqueta de apertura necesita su cierre con <code>/</code>
                </div>
            </div>
        </div>
        
        <!-- Preguntas de reflexión -->
        <div class="actividad" style="margin-top: 30px;">
            <div class="actividad-header">
                <span>🤔</span>
                <span>Preguntas de Reflexión</span>
            </div>
            <div style="padding: 25px;">
                <div style="background: rgba(102, 126, 234, 0.05); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                    <h4 style="color: var(--primario); margin-bottom: 12px;">❓ ¿Qué pasaría si...?</h4>
                    <ol style="margin-left: 25px; line-height: 2.5;">
                        <li><strong>¿Olvidaste cerrar la etiqueta &lt;html&gt;?</strong><br>
                            <span style="color: #94a3b8; font-size: 0.95rem;">→ El navegador tratará de adivinar dónde termina, pero puede causar errores</span>
                        </li>
                        <li><strong>¿Escribiste el DOCTYPE en mayúsculas o minúsculas?</strong><br>
                            <span style="color: #94a3b8; font-size: 0.95rem;">→ ¡No importa! Ambas formas funcionan: &lt;!DOCTYPE html&gt; o &lt;!doctype html&gt;</span>
                        </li>
                        <li><strong>¿Pusiste texto directamente en &lt;html&gt; sin head o body?</strong><br>
                            <span style="color: #94a3b8; font-size: 0.95rem;">→ El navegador lo aceptará pero no es correcto, siempre usa head y body</span>
                        </li>
                    </ol>
                </div>
                
                <div style="background: rgba(16, 185, 129, 0.1); padding: 20px; border-radius: 12px; border-left: 4px solid #10b981;">
                    <h4 style="color: #10b981; margin-bottom: 12px;">✅ Checklist de verificación</h4>
                    <p style="margin-bottom: 10px;">Antes de pasar al siguiente nivel, asegúrate de que entiendes:</p>
                    <ul style="margin-left: 25px; line-height: 2.2;">
                        <li>☑️ Para qué sirve el DOCTYPE</li>
                        <li>☑️ Qué hace la etiqueta &lt;html&gt;</li>
                        <li>☑️ Por qué es importante el atributo lang</li>
                        <li>☑️ Cómo abrir y cerrar etiquetas correctamente</li>
                        <li>☑️ La estructura básica mínima de un documento HTML</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer con navegación -->
    <footer class="nivel-footer">
        <div class="estrellas-ganadas" id="estrellas">⭐⭐⭐</div>
        <p id="mensajeFinal">Completa las actividades para ganar estrellas</p>
        <br>
        <button class="btn-continuar" id="btnContinuar" onclick="continuarNivel()">
            🚀 Continuar al Nivel 2
        </button>
    </footer>
    
    <!-- Botón de ayuda -->
    <button class="btn-ayuda-flotante" onclick="mostrarAyuda()">🤖</button>
    
    <!-- Mascota de ayuda -->
    <div class="mascota-ayuda" id="mascotaAyuda">
        <button class="mascota-cerrar" onclick="cerrarAyuda()">×</button>
        <div class="mascota-icono">🤖</div>
        <p><strong>¡Hola!</strong> Soy CodeBot, tu asistente.</p>
        <p style="margin-top: 10px; font-size: 0.9rem;">
            💡 <strong>Tip:</strong> Prueba cambiar el texto dentro de las etiquetas 
            y haz clic en "Ejecutar" para ver los cambios en la vista previa.
        </p>
    </div>
    
    <!-- Popup de logro -->
    <div class="overlay" id="overlay"></div>
    <div class="logro-popup" id="logroPopup">
        <div class="icono">🏆</div>
        <h2>¡Nivel Completado!</h2>
        <p style="margin: 15px 0;">Has aprendido sobre DOCTYPE y la estructura HTML</p>
        <div style="font-size: 2rem;">⭐⭐⭐</div>
        <button class="btn-continuar" onclick="irSiguienteNivel()" style="margin-top: 20px;">
            Ir al Nivel 2 ➡️
        </button>
    </div>

    <script>
        // Código inicial para reset
        const codigoInicial = `<!DOCTYPE html>
<html lang="es">
<head>
    <title>Mi Primera Página</title>
    <link rel="stylesheet" href="css/codequest.css">
    <script src="js/codequest.js" defer></script>
</head>
<body data-nivel="1">
    <h1>¡Hola Mundo!</h1>
    <p>Esta es mi primera página web.</p>
    <p>¡Estoy aprendiendo HTML!</p>
</body>
</html>`;

        // Variables de estado
        let quizCompletado = false;
        let codigoModificado = false;
        let progreso = 0;
        
        // Inicialización
        document.addEventListener('DOMContentLoaded', () => {
            ejecutarCodigo();
            cargarProgreso();
            
            // Detectar cambios en el editor
            document.getElementById('codigoEditor').addEventListener('input', () => {
                codigoModificado = true;
                actualizarProgreso();
            });
            
            // Configurar opciones del quiz
            document.querySelectorAll('.quiz-opcion').forEach(opcion => {
                opcion.addEventListener('click', () => {
                    const grupo = opcion.closest('.quiz-pregunta');
                    grupo.querySelectorAll('.quiz-opcion').forEach(o => o.classList.remove('selected'));
                    opcion.classList.add('selected');
                    opcion.querySelector('input').checked = true;
                });
            });
        });
        
        // Ejecutar código en el preview
        function ejecutarCodigo() {
            const codigo = document.getElementById('codigoEditor').value;
            const preview = document.getElementById('previewFrame');
            const previewDoc = preview.contentDocument || preview.contentWindow.document;
            previewDoc.open();
            previewDoc.write(codigo);
            previewDoc.close();
        }
        
        // Resetear código
        function resetearCodigo() {
            document.getElementById('codigoEditor').value = codigoInicial;
            ejecutarCodigo();
        }
        
        // Copiar código
        function copiarCodigo() {
            const codigo = document.getElementById('codigoEditor').value;
            navigator.clipboard.writeText(codigo).then(() => {
                const btn = document.querySelector('.btn-copiar');
                btn.innerHTML = '✅ Copiado!';
                setTimeout(() => {
                    btn.innerHTML = '📋 Copiar';
                }, 2000);
            });
        }
        
        // Verificar quiz
        function verificarQuiz() {
            let correctas = 0;
            
            for (let i = 1; i <= 3; i++) {
                const quiz = document.getElementById(`quiz${i}`);
                const seleccionada = quiz.querySelector('.quiz-opcion.selected');
                const resultado = document.getElementById(`resultado${i}`);
                
                quiz.querySelectorAll('.quiz-opcion').forEach(op => {
                    op.classList.remove('correcta', 'incorrecta');
                });
                
                if (seleccionada) {
                    const esCorrecta = seleccionada.dataset.correcta === 'true';
                    if (esCorrecta) {
                        seleccionada.classList.add('correcta');
                        resultado.className = 'quiz-resultado exito';
                        resultado.innerHTML = '✅ ¡Correcto! Muy bien';
                        correctas++;
                    } else {
                        seleccionada.classList.add('incorrecta');
                        resultado.className = 'quiz-resultado error';
                        resultado.innerHTML = '❌ Incorrecto. Intenta de nuevo';
                        // Mostrar la correcta
                        quiz.querySelector('[data-correcta="true"]').classList.add('correcta');
                    }
                }
            }
            
            if (correctas === 3) {
                quizCompletado = true;
                actualizarProgreso();
            }
        }
        
        // Actualizar progreso
        function actualizarProgreso() {
            let nuevoProgreso = 0;
            if (quizCompletado) nuevoProgreso += 50;
            if (codigoModificado) nuevoProgreso += 50;
            
            progreso = nuevoProgreso;
            document.getElementById('progresoFill').style.width = progreso + '%';
            document.getElementById('progresoTexto').textContent = progreso + '%';
            
            // Actualizar estrellas
            const estrellas = document.getElementById('estrellas');
            if (progreso >= 100) {
                estrellas.textContent = '⭐⭐⭐';
                document.getElementById('mensajeFinal').textContent = '¡Excelente! ¡Completaste todo!';
            } else if (progreso >= 50) {
                estrellas.textContent = '⭐⭐☆';
                document.getElementById('mensajeFinal').textContent = '¡Muy bien! Casi terminas';
            } else {
                estrellas.textContent = '⭐☆☆';
            }
            
            guardarProgreso();
            
            // Si completó todo, mostrar logro
            if (progreso >= 100 && quizCompletado) {
                setTimeout(mostrarLogro, 500);
            }
        }
        
        // Guardar/cargar progreso
        function guardarProgreso() {
            localStorage.setItem('nivel1_progreso', progreso);
            localStorage.setItem('nivel1_completado', progreso >= 100);
        }
        
        function cargarProgreso() {
            const guardado = localStorage.getItem('nivel1_progreso');
            if (guardado) {
                progreso = parseInt(guardado);
                document.getElementById('progresoFill').style.width = progreso + '%';
                document.getElementById('progresoTexto').textContent = progreso + '%';
            }
        }
        
        // Mostrar logro
        function mostrarLogro() {
            document.getElementById('overlay').classList.add('visible');
            document.getElementById('logroPopup').classList.add('visible');
        }
        
        // Ir al siguiente nivel
        function irSiguienteNivel() {
            window.location.href = 'nivel02.html';
        }
        
        // Continuar nivel
        function continuarNivel() {
            window.location.href = 'nivel02.html';
        }
        
        // Ayuda
        function mostrarAyuda() {
            document.getElementById('mascotaAyuda').classList.add('visible');
        }
        
        function cerrarAyuda() {
            document.getElementById('mascotaAyuda').classList.remove('visible');
        }
    </script>
</body>
</html>
<!-- Cache Buster: 2025-12-02T16:45:00 - Nivel 1 MEJORADO -->
